<?xml version="1.0"?>
<?xml-stylesheet href="http://jsbsim.sourceforge.net/JSBSim.xsl" type="text/xsl"?>
<fdm_config name="747-400" version="2.0" release="PRODUCTION"
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xsi:noNamespaceSchemaLocation="http://jsbsim.sourceforge.net/JSBSim.xsd">

    <fileheader>
        <author>Gijs de Rooy</author>
        <filecreationdate>2008</filecreationdate>
        <version>20130119</version>
        <description>Boeing 747-400 with GE CF6-80C2B1F engines</description>

        <license>
            <licenseName>GPL</licenseName>
            <licenseURL>http://www.gnu.org/licenses/gpl.html</licenseURL>
        </license>
  
        <note>maximum takeoff weight 875,000 lb.</note>
        <note>extended range fuel 54,388 US gal (364,400 lb).</note>
        <note>center of gravity between 13.0 % and 33.0 % of MAC.</note>
        <note>spoilers, leading edge flaps.</note>
        <note>gear height adjusted by 3D model, supposed accurate.</note>

        <limitation>at landing the arm of CG must be weak, otherwise pitch control is too slow to react at touch-down.</limitation>

<!--
  File:     747-400.xml
  Author:   Aero-Matic v 0.71

  Inputs:
    name:          747-400
    type:          four-engine transonic transport
    max TO weight: 875,000 lb
    wing span:     213 ft
    length:        231.10 ft
    wing area:     5500 sq-ft
    gear type:     tricycle
    retractable?:  yes
    # engines:     4
    engine type:   turbine
    engine layout: wings
    yaw damper?    yes
  Outputs:
    wing loading:  151.45 lb/sq-ft
    CL-alpha:      4.4 per radian
    CL-0:          0.2
    CL-max:        1.2
    CD-0:          0.017
    K:             0.042
-->

        <reference
          refID="747 airplane characteristics, D6-58236"
          author="The Boeing Company"
          title="http://www.boeing.com/"
          date="May 1984"/>
        <documentation>
          Dimensions : lateral position of engines.
                       gear tracks.
          Gear stearing.
          Tanks typical quantities.
        </documentation>
        
        <reference
          refID=""
          author="The Boeing Company"
          title="747-469/-4F6 Flight Crew Operations Manual, Philipine Airlines"
          date="2 September 1993"/>
        <reference
          refID=""
          author="The Boeing Company"
          title="747-400 Flight Planning and Performance Manual"
          date="2000"/>
        <reference
          refID=""
          author="The Boeing Company"
          title="747-400 Maintenance Manual, JAL"
          date="18 February 2007"/>
        <reference
          refID="D6 -30643"
          author="The Boeing Company"
          title="The Simulation of a Jumbo Jet Transport Aircraft Volume II: Modeling Data"
          date="September 1970"/>

        <documentation>
          - http://www.aoe.vt.edu/~mason/Mason_f/M96SC02.pdf (Willian H. Mason) :

          CG range : 13.0 / 33.0 %  MAC.

          - http://www.bh.com/companions/034074152X/appendices/data-a/table-3/table.htm :

          Horizontal tail : area 136.60 m2, arm 32.50 m, 1/4 chord sweep 32.00 m.
          Vertical tail : area 77.10 m2, arm 30.00 m, 1/4 chord sweep 45.00 m.
          V2 177 kt, Vapp 141 kt, Vne/Mme 445 kt / 0.95 Mach.

          - http://www.airliners.net/discussions/tech_ops/read.main/52218/6/#ID52218 :

          V2 190 kt (max takeoff load), climbs without flaps only at V2 + 100 kt.
          VREF 154 kt (max landing load).
        </documentation>
    </fileheader>

    <metrics>
        <documentation>
          - aero reference point is at empty load CG (33 % MAC) :
            less arm for landing; control is supposed easier if CG is forwards.
          - VRP at nose.
          - gear estimated at 25 ft (300 in.) below nose.
          - wing incidence helps the takeoff.
        </documentation>
        <wingarea unit="FT2"> 5825 </wingarea>
        <wingspan unit="FT"> 211.5 </wingspan>
        <chord unit="FT"> 27.54 </chord>                                                  <!-- aeromatic 28.11 -->
        <htailarea unit="FT2"> 1470.35 </htailarea>                                       <!-- aeromatic 1375.00 -->
        <htailarm unit="FT"> 106.63 </htailarm>                                           <!-- aeromatic 104.33 -->
        <vtailarea unit="FT2"> 1060 </vtailarea>                                         <!-- aeromatic 1100.00 -->
        <vtailarm unit="FT"> 0 </vtailarm>
        <!-- AC_LV        98.43     -->                        <!-- ft -->                <!-- aeromatic 104.33 -->
        <wing_incidence unit="DEG"> 2 </wing_incidence>
        <location name="AERORP" unit="IN">
            <x> 0 </x>
            <y> 0 </y>
            <z> 0 </z>
        </location>
        <location name="EYEPOINT" unit="IN">
            <x> 218 </x>
            <y> -21 </y>
            <z> 80  </z>
        </location>
        <location name="VRP" unit="IN">
            <x> 0 </x>
            <y> 0 </y>
            <z> 0 </z>
        </location>
    </metrics>

    <mass_balance>
        <documentation>
          - operational empty weight = 394088 lb
          - empty CG at 23 % MAC (no payload)
            
            inertia from http://www.wseas.us/e-library/conferences/2007istanbul/papers/557-095.pdf
        </documentation>
        <ixx unit="SLUG*FT2"> 1.82e+07 </ixx>
        <iyy unit="SLUG*FT2"> 3.31e+07 </iyy>
        <izz unit="SLUG*FT2"> 4.97e+07 </izz>
        <ixy unit="SLUG*FT2"> 0 </ixy>
        <ixz unit="SLUG*FT2"> 9.70e+05 </ixz>
        <iyz unit="SLUG*FT2"> 0 </iyz>
        <emptywt unit="LBS"> 259583  </emptywt> <!-- minus 2 wings and 4 engines -->
        <location name="CG" unit="M">
            <x> -5.0 </x>
            <y>  0   </y>
            <z>  0   </z>
        </location>
        <pointmass name="Passengers">
            <weight unit="LBS"> 70000 </weight> <!-- 400 passengers (175 lbs) -->
            <location name="POINTMASS" unit="M">
            <x> 2.537 </x>
            <y> 0.005 </y>
            <z> 0.747 </z>
            </location>
        </pointmass>
        <pointmass name="Forward Cargo">
            <form shape="cylinder">
               <radius unit="M"> 2 </radius>
               <length unit="M"> 12 </length>
            </form> 
            <weight unit="LBS"> 20000 </weight> <!-- 8 full-width (7000 lbs) or 16 half-width (3500 lbs) containers -->
            <location name="POINTMASS" unit="M">
               <x>-13.7 </x>
               <y>  0   </y>
               <z> -1.3 </z>
            </location>
        </pointmass>
        <pointmass name="Aft Cargo">
            <form shape="cylinder">
               <radius unit="M"> 2 </radius>
               <length unit="M"> 12 </length>
            </form> 
            <weight unit="LBS"> 20000 </weight> <!-- 8 full-width (7000 lbs) or 16 half-width (3500 lbs) containers -->
            <location name="POINTMASS" unit="M">
               <x> 14   </x>
               <y>  0   </y>
               <z> -1.2 </z>
            </location>
        </pointmass>
        <pointmass name="Left Wing">
            <weight unit="LBS"> 47500 </weight>
            <location name="POINTMASS" unit="M">
               <x>  2.65 </x>
               <y>-13.0  </y>
               <z> -0.45 </z>
            </location>
        </pointmass>
        <pointmass name="Right Wing">
            <weight unit="LBS"> 47500 </weight>
            <location name="POINTMASS" unit="M">
               <x> 2.65 </x>
               <y>13.0  </y>
               <z>-0.45 </z>
            </location>
        </pointmass>
        <pointmass name="Engine 1">
            <weight unit="LBS"> 9670 </weight>
            <location name="POINTMASS" unit="M">
               <x>  6.02 </x>
               <y>-21.23 </y>
               <z> -1.98 </z>
            </location>
        </pointmass>
        <pointmass name="Engine 2">
            <weight unit="LBS"> 9670 </weight>
            <location name="POINTMASS" unit="M">
               <x> -1.48 </x>
               <y>-13.46 </y>
               <z> -2.59 </z>
            </location>
        </pointmass>
        <pointmass name="Engine 3">
            <weight unit="LBS"> 9670 </weight>
            <location name="POINTMASS" unit="M">
               <x>-1.48 </x>
               <y>13.46 </y>
               <z>-2.59 </z>
            </location>
        </pointmass>
        <pointmass name="Engine 4">
            <weight unit="LBS"> 9670 </weight>
            <location name="POINTMASS" unit="M">
               <x> 6.02 </x>
               <y>21.23 </y>
               <z>-1.98 </z>
            </location>
        </pointmass>
    </mass_balance>

    <ground_reactions>
        <documentation>
           - gear height determined by 3D model, supposed at scale.
           - additonal contact points for crash detection, when gear retracted.
        </documentation>

        <contact type="BOGEY" name="NOSE">
            <location unit="IN">
                <x> -865.79 </x>
                <y>    0.00 </y>
                <z> -221.46 </z>
            </location>
            <static_friction> 0.5 </static_friction>
            <dynamic_friction> 0.5 </dynamic_friction>
            <rolling_friction> 0.02 </rolling_friction>
            <spring_coeff unit="LBS/FT"> 160000 </spring_coeff>
            <damping_coeff unit="LBS/FT/SEC"> 80000 </damping_coeff>
            <max_steer unit="DEG"> 70 </max_steer>
            <brake_group> NONE </brake_group>
            <retractable>1</retractable>
        </contact>
        <contact type="BOGEY" name="LEFT_WING">
            <location unit="IN">
                <x>  113.50 </x>
                <y> -238.90 </y>
                <z> -203.27 </z>
            </location>
            <static_friction> 0.5 </static_friction>
            <dynamic_friction> 0.5 </dynamic_friction>
            <rolling_friction> 0.02 </rolling_friction>
            <spring_coeff unit="LBS/FT"> 833000 </spring_coeff>
            <damping_coeff unit="LBS/FT/SEC"> 166600 </damping_coeff>
            <max_steer unit="DEG"> 0.0 </max_steer>
            <brake_group> LEFT </brake_group>
            <retractable>1</retractable>
        </contact>
        <contact type="BOGEY" name="LEFT_BODY">
            <location unit="IN">
                <x>  245 </x>
                <y>  -75.5 </y>
                <z> -203.27 </z>
            </location>
            <static_friction> 0.5 </static_friction>
            <dynamic_friction> 0.5 </dynamic_friction>
            <rolling_friction> 0.02 </rolling_friction>
            <spring_coeff unit="LBS/FT"> 833000 </spring_coeff>
            <damping_coeff unit="LBS/FT/SEC"> 166600 </damping_coeff>
            <max_steer unit="DEG"> 13 </max_steer>
            <brake_group> LEFT </brake_group>
            <retractable>1</retractable>
        </contact>
        <contact type="BOGEY" name="RIGHT_BODY">
            <location unit="IN">
                <x>  245 </x>
                <y>   75.5 </y>
                <z> -203.27 </z>
            </location>
            <static_friction> 0.5 </static_friction>
            <dynamic_friction> 0.5 </dynamic_friction>
            <rolling_friction> 0.02 </rolling_friction>
            <spring_coeff unit="LBS/FT"> 833000 </spring_coeff>
            <damping_coeff unit="LBS/FT/SEC"> 166600 </damping_coeff>
            <max_steer unit="DEG"> 13 </max_steer>
            <brake_group> RIGHT </brake_group>
            <retractable>1</retractable>
        </contact>
        <contact type="BOGEY" name="RIGHT_WING">
            <location unit="IN">
                <x>  113.50 </x>
                <y>  238.90 </y>
                <z> -203.27 </z>
            </location>
            <static_friction> 0.8 </static_friction>
            <dynamic_friction> 0.5 </dynamic_friction>
            <rolling_friction> 0.02 </rolling_friction>
            <spring_coeff unit="LBS/FT"> 833000 </spring_coeff>
            <damping_coeff unit="LBS/FT/SEC"> 166600 </damping_coeff>
            <max_steer unit="DEG"> 0.0 </max_steer>
            <brake_group> RIGHT </brake_group>
            <retractable>1</retractable>
        </contact>

        <contact type="BOGEY" name="NOSE_GROUND">
            <location unit="IN">
                <x> -865 </x>
                <y> 0 </y>
                <z> -100 </z>
            </location>
            <static_friction> 0.8 </static_friction>
            <dynamic_friction> 20 </dynamic_friction>
            <rolling_friction> 0.02 </rolling_friction>
            <spring_coeff unit="LBS/FT"> 249900 </spring_coeff>
            <damping_coeff unit="LBS/FT/SEC"> 83300 </damping_coeff>
            <max_steer unit="DEG"> 0 </max_steer>
            <brake_group> NONE </brake_group>
            <retractable>0</retractable>
        </contact>
        <contact type="BOGEY" name="LEFT_GROUND">
            <location unit="IN">
                <x> -865 </x>
                <y> -70 </y>
                <z> -100 </z>
            </location>
            <static_friction> 0.8 </static_friction>
            <dynamic_friction> 20 </dynamic_friction>
            <rolling_friction> 0.02 </rolling_friction>
            <spring_coeff unit="LBS/FT"> 249900 </spring_coeff>
            <damping_coeff unit="LBS/FT/SEC"> 83300 </damping_coeff>
            <max_steer unit="DEG"> 0 </max_steer>
            <brake_group> NONE </brake_group>
            <retractable>0</retractable>
        </contact>
        <contact type="BOGEY" name="RIGHT_GROUND">
            <location unit="IN">
                <x> -865 </x>
                <y> 70 </y>
                <z> -100 </z>
            </location>
            <static_friction> 0.8 </static_friction>
            <dynamic_friction> 20 </dynamic_friction>
            <rolling_friction> 0.02 </rolling_friction>
            <spring_coeff unit="LBS/FT"> 249900 </spring_coeff>
            <damping_coeff unit="LBS/FT/SEC"> 83300 </damping_coeff>
            <max_steer unit="DEG"> 0 </max_steer>
            <brake_group> NONE </brake_group>
            <retractable>0</retractable>
        </contact>


        <contact type="STRUCTURE" name="NOSE_TIP">
            <location unit="FT">
                <x> -97.5 </x>
                <y> 0 </y>
                <z> 1 </z>
            </location>
            <static_friction> 0.8 </static_friction>
            <dynamic_friction> 0.5 </dynamic_friction>
            <rolling_friction> 0.02 </rolling_friction>
            <spring_coeff unit="LBS/FT"> 249900 </spring_coeff>
            <damping_coeff unit="LBS/FT/SEC"> 83300 </damping_coeff>
            <max_steer unit="DEG"> 0.0 </max_steer>
            <brake_group> NONE </brake_group>
            <retractable>0</retractable>
        </contact>
        <contact type="STRUCTURE" name="LEFT_TIP">
            <location unit="FT">
                <x> 65 </x>
                <y> -105 </y>
                <z> 4 </z>
            </location>
            <static_friction> 0.8 </static_friction>
            <dynamic_friction> 0.5 </dynamic_friction>
            <rolling_friction> 0.02 </rolling_friction>
            <spring_coeff unit="LBS/FT"> 833000 </spring_coeff>
            <damping_coeff unit="LBS/FT/SEC"> 166600 </damping_coeff>
            <max_steer unit="DEG"> 0.0 </max_steer>
            <brake_group> NONE </brake_group>
            <retractable>0</retractable>
        </contact>
        <contact type="STRUCTURE" name="RIGHT_TIP">
            <location unit="FT">
                <x> 65 </x>
                <y> 105 </y>
                <z> 4 </z>
            </location>
            <static_friction> 0.8 </static_friction>
            <dynamic_friction> 0.5 </dynamic_friction>
            <rolling_friction> 0.02 </rolling_friction>
            <spring_coeff unit="LBS/FT"> 833000 </spring_coeff>
            <damping_coeff unit="LBS/FT/SEC"> 166600 </damping_coeff>
            <max_steer unit="DEG"> 0.0 </max_steer>
            <brake_group> NONE </brake_group>
            <retractable>0</retractable>
        </contact>
        <contact type="STRUCTURE" name="TAIL_TIP">
            <location unit="FT">
                <x> 127 </x>
                <y> 0 </y>
                <z> 7.5 </z>
            </location>
            <static_friction> 0.8 </static_friction>
            <dynamic_friction> 0.5 </dynamic_friction>
            <rolling_friction> 0.02 </rolling_friction>
            <spring_coeff unit="LBS/FT"> 249900 </spring_coeff>
            <damping_coeff unit="LBS/FT/SEC"> 83300 </damping_coeff>
            <max_steer unit="DEG"> 0.0 </max_steer>
            <brake_group> NONE </brake_group>
            <retractable>0</retractable>
        </contact>
    </ground_reactions>
    <propulsion>

        <engine file="GE_CF6-80C2B1F">
            <location unit="IN">
                <x> 50 </x>
                <y> -835 </y>                                                                 <!-- aeromatic -391.34 -->
                <z> -100 </z>
            </location>
            <orient unit="DEG">
                <roll> 0.0 </roll>
                <pitch> 0 </pitch>
                <yaw> 0 </yaw>
            </orient>
            <feed>1</feed>
            <thruster file="direct">
                <location unit="IN">
                    <x> 50 </x>
                    <y> -835 </y>
                    <z> -100 </z>
                </location>
                <orient unit="DEG">
                    <roll> 0.0 </roll>
                    <pitch> 0.0 </pitch>
                    <yaw> 0.0 </yaw>
                </orient>
            </thruster>
        </engine>

        <engine file="GE_CF6-80C2B1F">
            <location unit="IN">
                <x> -250 </x>
                <y> -530 </y>                                                                 <!-- aeromatic -391.34 -->
                <z> -100 </z>
            </location>
            <orient unit="DEG">
                <roll> 0.0 </roll>
                <pitch> 0 </pitch>
                <yaw> 0 </yaw>
            </orient>
            <feed>2</feed>
            <thruster file="direct">
                <location unit="IN">
                    <x> -250 </x>
                    <y> -530 </y>
                    <z> -100 </z>
                </location>
                <orient unit="DEG">
                    <roll> 0.0 </roll>
                    <pitch> 0.0 </pitch>
                    <yaw> 0.0 </yaw>
                </orient>
            </thruster>
        </engine>

        <engine file="GE_CF6-80C2B1F">
            <location unit="IN">
                <x>-250 </x>
                <y> 530 </y>
                <z> -100 </z>
            </location>
            <orient unit="DEG">
                <roll> 0.0 </roll>
                <pitch> 0 </pitch>
                <yaw> 0 </yaw>
            </orient>
            <feed>3</feed>
            <thruster file="direct">
                <location unit="IN">
                    <x> -250 </x>
                    <y> 530 </y>
                    <z> -100 </z>
                </location>
                <orient unit="DEG">
                    <roll> 0.0 </roll>
                    <pitch> 0.0 </pitch>
                    <yaw> 0.0 </yaw>
                </orient>
            </thruster>
        </engine>

        <engine file="GE_CF6-80C2B1F">
            <location unit="IN">
                <x> 50 </x>
                <y> 835 </y>
                <z> -100 </z>
            </location>
            <orient unit="DEG">
                <roll> 0.0 </roll>
                <pitch> 0 </pitch>
                <yaw> 0 </yaw>
            </orient>
            <feed>4</feed>
            <thruster file="direct">
                <location unit="IN">
                    <x> 50 </x>
                    <y> 835 </y>
                    <z> -100 </z>
                </location>
                <orient unit="DEG">
                    <roll> 0.0 </roll>
                    <pitch> 0.0 </pitch>
                    <yaw> 0.0 </yaw>
                </orient>
            </thruster>
        </engine>
        
        <engine file="APU_PW901">
            <location unit="IN">
                <x> 100 </x>
                <y> 0 </y>
                <z> 10 </z>
            </location>
            <orient unit="DEG">
                <roll> 0.0 </roll>
                <pitch> 0 </pitch>
                <yaw> 0 </yaw>
            </orient>
            <feed>2</feed>
            <thruster file="direct">
                <location unit="IN">
                    <x> 0 </x>
                    <y> 0 </y>
                    <z> 10 </z>
                </location>
                <orient unit="DEG">
                    <roll> 0.0 </roll>
                    <pitch> 0.0 </pitch>
                    <yaw> 0.0 </yaw>
                </orient>
            </thruster>
        </engine>

        <documentation>
          - tank arm and lateral position is a guess : must fit inside the wing,
            in front of gear well; and close of aero reference point to minimize the CG shift.
          - typical quantities (53765 US gal).
          - extended range fuel (2048 US gal), spread on the reserve tanks.
          - 1 US gal = 6.7 lb.
        </documentation>

        <tank type="FUEL">    <!-- Tank number 0 == center wing--> 
            <location unit="M">
                <x>-2.5 </x>
                <y> 0   </y>
                <z>-1.0 </z>
            </location>
            <capacity unit="LBS"> 114972.0 </capacity>
            <contents unit="LBS"> 114972.0 </contents>
        </tank>
        
        <tank type="FUEL">    <!-- Tank number 1 == main #1--> 
            <location unit="M">
                <x>  7.8 </x>
                <y>-17.1 </y>
                <z> -0.1 </z>
            </location>
            <capacity unit="LBS"> 29694.4 </capacity>
            <contents unit="LBS"> 29694.4 </contents>
        </tank>

        <tank type="FUEL">    <!-- Tank number 2 == main #2--> 
            <location unit="M">
                <x> 2.0 </x>
                <y>-8.2 </y>
                <z>-0.7 </z>
            </location>
            <capacity unit="LBS"> 84058.0 </capacity>
            <contents unit="LBS"> 84058.0 </contents>
        </tank>

        <tank type="FUEL">    <!-- Tank number 3 == main #3--> 
            <location unit="M">
                <x> 2.0 </x>
                <y> 8.2 </y>
                <z>-0.7 </z>
            </location>
            <capacity unit="LBS"> 84058.0 </capacity>
            <contents unit="LBS"> 84058.0 </contents>
        </tank>

        <tank type="FUEL">    <!-- Tank number 4 == Main #4--> 
            <location unit="M">
                <x> 7.8 </x>
                <y>17.1 </y>
                <z>-0.1 </z>
            </location>
            <capacity unit="LBS"> 29694.4 </capacity>
            <contents unit="LBS"> 29694.4 </contents>
        </tank>
        
        <tank type="FUEL">    <!-- Tank number 5 == reserve #2--> 
            <location unit="M">
                <x> 14.0 </x>
                <y>-26.3 </y>
                <z>  0.9   </z>
            </location>
            <capacity unit="LBS"> 8857.4 </capacity>
            <contents unit="LBS"> 8857.4 </contents>
        </tank>

        <tank type="FUEL">    <!-- Tank number 6 == reserve #3--> 
            <location unit="M">
                <x>14.0 </x>
                <y>26.3 </y>
                <z> 0.9   </z>
            </location>
            <capacity unit="LBS"> 8857.4 </capacity>
            <contents unit="LBS"> 8857.4 </contents>
        </tank>

        <tank type="FUEL">    <!-- Tank number 7 == stab--> 
            <location unit="M">
                <x>32.0 </x>
                <y> 0   </y>
                <z> 2.5 </z>
            </location>
            <capacity unit="LBS"> 22110.0 </capacity>
            <contents unit="LBS"> 0.0 </contents>
        </tank>
    </propulsion>

    <system file="engines"/>
    <system file="failures"/>
    <system file="flaps"/>
    <system file="fuel"/>
    <system file="gear"/>
    <system file="pushback"/>
    <system file="wingflex"/>

    <flight_control name="747-400">
    <property>fcs/LE-flap-cmd-norm</property>

    <channel name="Pitch">

        <summer name="Pitch Trim Sum">
            <input>fcs/elevator-cmd-norm</input>
            <input>fcs/pitch-trim-cmd-norm</input>
            <clipto>
                <min>-1</min>
                <max>1</max>
            </clipto>
        </summer>

        <aerosurface_scale name="Elevator Control">
            <input>fcs/pitch-trim-sum</input>
            <range>
                <min>-0.26</min>
                <max> 0.44</max>
            </range>
            <output>fcs/inboard-elevator-int-pos-rad</output>
            <output>fcs/outboard-elevator-int-pos-rad</output>
        </aerosurface_scale>
        <actuator name="fcs/inboard-elevator-pos-rad">
            <input>fcs/inboard-elevator-int-pos-rad</input>
            <rate_limit> 0.646 </rate_limit> <!-- 37 deg/sec -->
        </actuator>
        <actuator name="fcs/outboard-elevator-pos-rad">
            <input>fcs/outboard-elevator-int-pos-rad</input>
            <rate_limit> 0.646 </rate_limit> <!-- 37 deg/sec -->
        </actuator>

     </channel>
     <channel name="Roll">

        <summer name="Roll Trim Sum">
            <input>fcs/aileron-cmd-norm</input>
            <input>fcs/roll-trim-cmd-norm</input>
            <clipto>
                <min>-1</min>
                <max>1</max>
            </clipto>
        </summer>

        <aerosurface_scale name="Left Outboard Aileron Control">
            <input>fcs/roll-trim-sum</input>
            <range>
                <min>-0.44</min>
                <max> 0.26</max>
            </range>
            <output>fcs/left-outboard-aileron-pos-rad</output>
        </aerosurface_scale>
        <aerosurface_scale name="Left Outboard Aileron Position Normalizer">
            <input>fcs/roll-trim-sum</input>
            <range>
                <min>-1</min>
                <max> 1</max>
            </range>
            <output>fcs/left-outboard-aileron-pos-norm</output>
            <output>/surface-positions/left-outboard-aileron-pos-norm</output>
        </aerosurface_scale>
        
        <aerosurface_scale name="Right Outboard Aileron Control">
            <input>fcs/roll-trim-sum</input>
            <range>
                <min>-0.44</min>
                <max> 0.26</max>
            </range>
            <output>fcs/right-outboard-aileron-pos-rad</output>
        </aerosurface_scale>
        <aerosurface_scale name="Right Outboard Aileron Position Normalizer">
            <input>fcs/roll-trim-sum</input>
            <range>
                <min>-1</min>
                <max> 1</max>
            </range>
            <output>fcs/right-outboard-aileron-pos-norm</output>
            <output>/surface-positions/right-outboard-aileron-pos-norm</output>
        </aerosurface_scale>
        
        <switch name="fcs/outboard-ailerons-lockout">
            <default value="1"/>
            <test  logic="AND" value="0">
                velocities/vc-kts > 238
                /controls/flight/flaps == 0
            </test>
            <test  logic="AND" value="0">
                velocities/mach > 0.53
                /controls/flight/flaps == 0
            </test>
            <output>fcs/outboard-ailerons-unlocked</output>
        </switch>
        
        <aerosurface_scale name="Left Inboard Aileron Control">
            <input>fcs/roll-trim-sum</input>
            <range>
                <min>-0.35</min>
                <max> 0.35</max>
            </range>
            <output>fcs/left-inboard-aileron-pos-rad</output>
        </aerosurface_scale>
        <aerosurface_scale name="Left Inboard Aileron Position Normalizer">
            <input>fcs/roll-trim-sum</input>
            <range>
                <min>-1</min>
                <max> 1</max>
            </range>
            <output>fcs/left-inboard-aileron-pos-norm</output>
            <output>/surface-positions/left-inboard-aileron-pos-norm</output>
        </aerosurface_scale>
        
        <aerosurface_scale name="Right Inboard Aileron Control">
            <input>fcs/roll-trim-sum</input>
            <range>
                <min>-0.35</min>
                <max> 0.35</max>
            </range>
            <output>fcs/right-inboard-aileron-pos-rad</output>
        </aerosurface_scale>
        <aerosurface_scale name="Right Inboard Aileron Position Normalizer">
            <input>fcs/roll-trim-sum</input>
            <range>
                <min>-1</min>
                <max> 1</max>
            </range>
            <output>fcs/right-inboard-aileron-pos-norm</output>
            <output>/surface-positions/right-inboard-aileron-pos-norm</output>
        </aerosurface_scale>
        
        <fcs_function name="Average Aileron Deflection">
            <function name="fcs/total-aileron-pos-rad">
                <description>Average_aileron_pos_rad</description>
                <avg>
                    <product>
                        <property>fcs/left-outboard-aileron-pos-rad</property>
                        <property>fcs/outboard-ailerons-unlocked</property>
                    </product>
                    <property>fcs/left-inboard-aileron-pos-rad</property>
                    <property>fcs/right-inboard-aileron-pos-rad</property>
                    <product>
                        <property>fcs/right-outboard-aileron-pos-rad</property>
                        <property>fcs/outboard-ailerons-unlocked</property>
                    </product>
                </avg>
            </function>
            <output>fcs/aileron-pos-rad</output>
        </fcs_function>
        
        <!-- Spoilers -->
        
        <switch>
            <default value="0"/>
            <test  logic="AND" value="-fcs/roll-trim-sum">
                /controls/flight/speedbrakes == 0
            </test>
            <test  logic="AND" value="1">
                /controls/flight/speedbrakes == 2
            </test>
            <output>fcs/spoiler-cmd-norm[0]</output>
        </switch>
        <aerosurface_scale name="Spoiler 1 Control">
            <input>fcs/spoiler-cmd-norm[0]</input>
            <range>
                <min> 0</min>
                <max> 0.785</max>
            </range>
            <output>fcs/spoiler-pos-int-rad[0]</output>
        </aerosurface_scale>
        <actuator>
            <input>fcs/spoiler-pos-int-rad[0]</input>
            <rate_limit> 1.309 </rate_limit> <!-- 75 deg/sec -->
            <output>fcs/spoiler-pos-rad[0]</output>
        </actuator>
        
        <switch>
            <default value="0"/>
            <test  logic="AND" value="-fcs/roll-trim-sum">
                /controls/flight/speedbrakes == 0
            </test>
            <test  logic="AND" value="1">
                /controls/flight/speedbrakes == 2
            </test>
            <output>fcs/spoiler-cmd-norm[1]</output>
        </switch>
        <aerosurface_scale name="Spoiler 2 Control">
            <input>fcs/spoiler-cmd-norm[1]</input>
            <range>
                <min> 0</min>
                <max> 0.785</max>
            </range>
            <output>fcs/spoiler-pos-int-rad[1]</output>
        </aerosurface_scale>
        <actuator>
            <input>fcs/spoiler-pos-int-rad[1]</input>
            <rate_limit> 1.309 </rate_limit> <!-- 75 deg/sec -->
            <output>fcs/spoiler-pos-rad[1]</output>
        </actuator>
        
        <switch>
            <default value="0"/>
            <test  logic="AND" value="-fcs/roll-trim-sum">
                /controls/flight/speedbrakes == 0
            </test>
            <test  logic="OR" value="1">
                /controls/flight/speedbrakes == 1
                /controls/flight/speedbrakes == 2
            </test>
            <output>fcs/spoiler-cmd-norm[2]</output>
        </switch>
        <aerosurface_scale name="Spoiler 3 Control">
            <input>fcs/spoiler-cmd-norm[2]</input>
            <range>
                <min> 0</min>
                <max> 0.785</max>
            </range>
            <output>fcs/spoiler-pos-int-rad[2]</output>
        </aerosurface_scale>
        <actuator>
            <input>fcs/spoiler-pos-int-rad[2]</input>
            <rate_limit> 1.309 </rate_limit> <!-- 75 deg/sec -->
            <output>fcs/spoiler-pos-rad[2]</output>
        </actuator>
        
        <switch>
            <default value="0"/>
            <test  logic="AND" value="-fcs/roll-trim-sum">
                /controls/flight/speedbrakes == 0
            </test>
            <test  logic="OR" value="1">
                /controls/flight/speedbrakes == 1
                /controls/flight/speedbrakes == 2
            </test>
            <output>fcs/spoiler-cmd-norm[3]</output>
        </switch>
        <aerosurface_scale name="Spoiler 4 Control">
            <input>fcs/spoiler-cmd-norm[3]</input>
            <range>
                <min> 0</min>
                <max> 0.785</max>
            </range>
            <output>fcs/spoiler-pos-int-rad[3]</output>
        </aerosurface_scale>
        <actuator>
            <input>fcs/spoiler-pos-int-rad[3]</input>
            <rate_limit> 1.309 </rate_limit> <!-- 75 deg/sec -->
            <output>fcs/spoiler-pos-rad[3]</output>
        </actuator>
        
        <switch>
            <default value="0"/>
            <test  logic="AND" value="0.5">
                /controls/flight/speedbrakes == 1
            </test>
            <test  logic="AND" value="1">
                /controls/flight/speedbrakes == 2
            </test>
            <output>fcs/spoiler-cmd-norm[4]</output>
        </switch>
        <aerosurface_scale name="Spoiler 5 Control">
            <input>fcs/spoiler-cmd-norm[4]</input>
            <range>
                <min> 0</min>
                <max> 0.349</max>
            </range>
            <output>fcs/spoiler-pos-int-rad[4]</output>
        </aerosurface_scale>
        <actuator>
            <input>fcs/spoiler-pos-int-rad[4]</input>
            <rate_limit> 1.309 </rate_limit> <!-- 25 deg/sec -->
            <output>fcs/spoiler-pos-rad[4]</output>
        </actuator>
        
        <switch>
            <default value="0"/>
            <test  logic="AND" value="0.5">
                /controls/flight/speedbrakes == 1
            </test>
            <test  logic="AND" value="1">
                /controls/flight/speedbrakes == 2
            </test>
            <output>fcs/spoiler-cmd-norm[5]</output>
        </switch>
        <aerosurface_scale name="Spoiler 6 Control">
            <input>fcs/spoiler-cmd-norm[5]</input>
            <range>
                <min> 0</min>
                <max> 0.349</max>
            </range>
            <output>fcs/spoiler-pos-int-rad[5]</output>
        </aerosurface_scale>
        <actuator>
            <input>fcs/spoiler-pos-int-rad[5]</input>
            <rate_limit> 1.309 </rate_limit> <!-- 25 deg/sec -->
            <output>fcs/spoiler-pos-rad[5]</output>
        </actuator>
        
        <switch>
            <default value="0"/>
            <test  logic="AND" value="0.5">
                /controls/flight/speedbrakes == 1
            </test>
            <test  logic="AND" value="1">
                /controls/flight/speedbrakes == 2
            </test>
            <output>fcs/spoiler-cmd-norm[6]</output>
        </switch>
        <aerosurface_scale name="Spoiler 7 Control">
            <input>fcs/spoiler-cmd-norm[6]</input>
            <range>
                <min> 0</min>
                <max> 0.349</max>
            </range>
            <output>fcs/spoiler-pos-int-rad[6]</output>
        </aerosurface_scale>
        <actuator>
            <input>fcs/spoiler-pos-int-rad[6]</input>
            <rate_limit> 1.309 </rate_limit> <!-- 25 deg/sec -->
            <output>fcs/spoiler-pos-rad[6]</output>
        </actuator>
        
        <switch>
            <default value="0"/>
            <test  logic="AND" value="0.5">
                /controls/flight/speedbrakes == 1
            </test>
            <test  logic="AND" value="1">
                /controls/flight/speedbrakes == 2
            </test>
            <output>fcs/spoiler-cmd-norm[7]</output>
        </switch>
        <aerosurface_scale name="Spoiler 8 Control">
            <input>fcs/spoiler-cmd-norm[7]</input>
            <range>
                <min> 0</min>
                <max> 0.349</max>
            </range>
            <output>fcs/spoiler-pos-int-rad[7]</output>
        </aerosurface_scale>
        <actuator>
            <input>fcs/spoiler-pos-int-rad[7]</input>
            <rate_limit> 1.309 </rate_limit> <!-- 25 deg/sec -->
            <output>fcs/spoiler-pos-rad[7]</output>
        </actuator>
        
        <switch>
            <default value="0"/>
            <test  logic="AND" value="fcs/roll-trim-sum">
                /controls/flight/speedbrakes == 0
            </test>
            <test  logic="OR" value="1">
                /controls/flight/speedbrakes == 1
                /controls/flight/speedbrakes == 2
            </test>
            <output>fcs/spoiler-cmd-norm[8]</output>
        </switch>
        <aerosurface_scale name="Spoiler 9 Control">
            <input>fcs/spoiler-cmd-norm[8]</input>
            <range>
                <min> 0</min>
                <max> 0.785</max>
            </range>
            <output>fcs/spoiler-pos-int-rad[8]</output>
        </aerosurface_scale>
        <actuator>
            <input>fcs/spoiler-pos-int-rad[8]</input>
            <rate_limit> 1.309 </rate_limit> <!-- 75 deg/sec -->
            <output>fcs/spoiler-pos-rad[8]</output>
        </actuator>
        
        <switch>
            <default value="0"/>
            <test  logic="AND" value="fcs/roll-trim-sum">
                /controls/flight/speedbrakes == 0
            </test>
            <test  logic="OR" value="1">
                /controls/flight/speedbrakes == 1
                /controls/flight/speedbrakes == 2
            </test>
            <output>fcs/spoiler-cmd-norm[9]</output>
        </switch>
        <aerosurface_scale name="Spoiler 10 Control">
            <input>fcs/spoiler-cmd-norm[9]</input>
            <range>
                <min> 0</min>
                <max> 0.785</max>
            </range>
            <output>fcs/spoiler-pos-int-rad[9]</output>
        </aerosurface_scale>
        <actuator>
            <input>fcs/spoiler-pos-int-rad[9]</input>
            <rate_limit> 1.309 </rate_limit> <!-- 75 deg/sec -->
            <output>fcs/spoiler-pos-rad[9]</output>
        </actuator>
        
        <switch>
            <default value="0"/>
            <test  logic="AND" value="fcs/roll-trim-sum">
                /controls/flight/speedbrakes == 0
            </test>
            <test  logic="AND" value="1">
                /controls/flight/speedbrakes == 2
            </test>
            <output>fcs/spoiler-cmd-norm[10]</output>
        </switch>
        <aerosurface_scale name="Spoiler 11 Control">
            <input>fcs/spoiler-cmd-norm[10]</input>
            <range>
                <min> 0</min>
                <max> 0.785</max>
            </range>
            <output>fcs/spoiler-pos-int-rad[10]</output>
        </aerosurface_scale>
        <actuator>
            <input>fcs/spoiler-pos-int-rad[10]</input>
            <rate_limit> 1.309 </rate_limit> <!-- 75 deg/sec -->
            <output>fcs/spoiler-pos-rad[10]</output>
        </actuator>
        
        <switch>
            <default value="0"/>
            <test  logic="AND" value="fcs/roll-trim-sum">
                /controls/flight/speedbrakes == 0
            </test>
            <test  logic="AND" value="1">
                /controls/flight/speedbrakes == 2
            </test>
            <output>fcs/spoiler-cmd-norm[11]</output>
        </switch>
        <aerosurface_scale name="Spoiler 12 Control">
            <input>fcs/spoiler-cmd-norm[11]</input>
            <range>
                <min> 0</min>
                <max> 0.785</max>
            </range>
            <output>fcs/spoiler-pos-int-rad[11]</output>
        </aerosurface_scale>
        <actuator>
            <input>fcs/spoiler-pos-int-rad[11]</input>
            <rate_limit> 1.309 </rate_limit> <!-- 75 deg/sec -->
            <output>fcs/spoiler-pos-rad[11]</output>
        </actuator>

     </channel>
     <channel name="Yaw">

        <summer name="Rudder Command Sum">
            <input>fcs/rudder-cmd-norm</input>
            <input>fcs/yaw-trim-cmd-norm</input>
            <clipto>
                <min>-1</min>
                <max>1</max>
            </clipto>
        </summer>

        <scheduled_gain name="Yaw Damper Rate">
            <input>velocities/r-aero-rad_sec</input>
            <table>
                <independentVar>aero/qbar-psf</independentVar>
                <tableData>
                    3.0000    0.0000    
                    11.0000    2.0000    
                </tableData>
            </table>
        </scheduled_gain>

        <scheduled_gain name="Yaw Damper Beta">
            <input>aero/beta-rad</input>
            <table>
                <independentVar>aero/qbar-psf</independentVar>
                <tableData>
                    3.0000    0.0000    
                    11.0000    0.0000    
                </tableData>
            </table>
        </scheduled_gain>

        <summer name="Yaw Damper Sum">
            <input>fcs/yaw-damper-beta</input>
            <input>fcs/yaw-damper-rate</input>
            <clipto>
                <min>-0.2000</min>
                <max>0.2000</max>
            </clipto>
        </summer>

        <scheduled_gain name="Yaw Damper Final">
            <input>fcs/yaw-damper-sum</input>
            <table>
                <independentVar>aero/qbar-psf</independentVar>
                <tableData>
                    2.9900    0.0000    
                    3.0000    1.0000    
                </tableData>
            </table>
        </scheduled_gain>

        <summer name="Rudder Sum">
            <input>fcs/rudder-command-sum</input>
            <input>fcs/yaw-damper-final</input>
            <clipto>
                <min>-1.0000</min>
                <max>1.0000</max>
            </clipto>
        </summer>

        <aerosurface_scale name="Rudder Control">
            <input>fcs/rudder-sum</input>
            <range>
                <min>-0.61</min>
                <max>0.61</max>
            </range>
            <output>fcs/rudder-pos-int-rad</output>
        </aerosurface_scale>
        <actuator name="fcs/rudder-pos-rad">
            <input>fcs/rudder-pos-int-rad</input>
            <rate_limit> 0.873 </rate_limit> <!-- 50 deg/sec -->
        </actuator>

     </channel>
     <channel name="Aeromechanical">

        <kinematic name="Flaps Control">
            <input>fcs/flap-cmd-norm</input>
            <traverse>
                <setting>
                    <position>0.0</position>
                    <time>0.0000</time>
                </setting>
                <setting>
                    <position>1.0000</position>
                    <time>25.0000</time>
                </setting>
                <setting>
                    <position>5.0000</position>
                    <time>25.0000</time>
                </setting>
                <setting>
                    <position>10.0000</position>
                    <time>12.0000</time>
                </setting>
                <setting>
                    <position>20.0000</position>
                    <time>12.0000</time>
                </setting>
                <setting>
                    <position>25.0000</position>
                    <time>12.0000</time>
                </setting>
                <setting>
                    <position>30.0000</position>
                    <time>12.0000</time>
                </setting>
            </traverse>
            <output>fcs/flap-pos-deg</output>
        </kinematic>
        <aerosurface_scale name="Flap Position Normalizer">
            <input>fcs/flap-pos-deg</input>
            <domain>
                <min>0</min>
                <max>30</max>
            </domain>
            <range>
                <min>0</min>
                <max>1</max>
            </range>
            <output>fcs/flap-pos-norm</output>
        </aerosurface_scale>
        
        <fcs_function name="Flap Cmd Deg">
            <function>
                <product>
                       <property>fcs/flap-cmd-norm</property>
                       <value>30</value>
                </product>
            </function>
            <output>fcs/flap-cmd-deg1</output>
        </fcs_function>
        
        <kinematic name="gear/unit[0]/pos">
            <input>gear/unit[0]/pos-cmd-norm</input>
            <traverse>
                <setting>
                    <position>0.0000</position>
                    <time>0.0000</time>
                </setting>
                <setting>
                    <position>1.0000</position>
                    <time>25.0000</time>
                </setting>
            </traverse>
            <output>gear/unit[0]/pos-norm</output>
        </kinematic>
        <kinematic name="gear/unit[1]/pos">
            <input>gear/unit[1]/pos-cmd-norm</input>
            <traverse>
                <setting>
                    <position>0.0000</position>
                    <time>0.0000</time>
                </setting>
                <setting>
                    <position>1.0000</position>
                    <time>25.0000</time>
                </setting>
            </traverse>
            <output>gear/unit[1]/pos-norm</output>
        </kinematic>
        <kinematic name="gear/unit[2]/pos">
            <input>gear/unit[2]/pos-cmd-norm</input>
            <traverse>
                <setting>
                    <position>0.0000</position>
                    <time>0.0000</time>
                </setting>
                <setting>
                    <position>1.0000</position>
                    <time>25.0000</time>
                </setting>
            </traverse>
            <output>gear/unit[2]/pos-norm</output>
        </kinematic>
        <kinematic name="gear/unit[3]/pos">
            <input>gear/unit[3]/pos-cmd-norm</input>
            <traverse>
                <setting>
                    <position>0.0000</position>
                    <time>0.0000</time>
                </setting>
                <setting>
                    <position>1.0000</position>
                    <time>25.0000</time>
                </setting>
            </traverse>
            <output>gear/unit[3]/pos-norm</output>
        </kinematic>
        <kinematic name="gear/unit[4]/pos">
            <input>gear/unit[4]/pos-cmd-norm</input>
            <traverse>
                <setting>
                    <position>0.0000</position>
                    <time>0.0000</time>
                </setting>
                <setting>
                    <position>1.0000</position>
                    <time>25.0000</time>
                </setting>
            </traverse>
            <output>gear/unit[4]/pos-norm</output>
        </kinematic>
        
        <switch name="/controls/gear/tiller-disabled">
            <default value="0"/>
            <test logic="AND" value="1">
                /controls/gear/tiller-enabled == 0
            </test>
        </switch>
        
        <fcs_function name="Nose Wheel Steering 0">
          <function name="fcs/steer-nose-deg[0]">
            <description>Steering command for nose gear</description>
            <sum>
              <product>
                <table>
                   <independentVar lookup="row">/controls/gear/tiller-cmd-norm</independentVar>
                   <independentVar lookup="column">/controls/flight/rudder</independentVar>
                   <tableData>
                      -1   0   1
                  -1 -70 -70 -70
                   0  -7   0   7
                   1  70  70  70
                   </tableData>
                </table>
                <property>/controls/gear/tiller-enabled</property>
              </product>
              <product>
                <product>
                   <property>/controls/flight/rudder</property>
                   <value>70</value>
                </product>
                <property>/controls/gear/tiller-disabled</property>
              </product>
            </sum>
          </function>
        </fcs_function>
        
        <!-- simulate rotational friction -->
        <actuator name="Gear Nose Actuator">
          <input>fcs/steer-nose-deg[0]</input>
          <rate_limit>70</rate_limit>
          <output>fcs/steer-pos-deg[0]</output>
        </actuator>
        
        <fcs_function name="Rear Wheel Steering 2">
          <function name="fcs/steer-rear-deg[2]">
            <description>Steering command for left body gear</description>
            <product>
              <table>
                 <independentVar lookup="row">fcs/steer-pos-deg</independentVar>
                 <independentVar lookup="column">velocities/vg-fps</independentVar>
                 <tableData>
                      0  34  40  45
                -70  13  13   0   0 
                -65  13  13   0   0
                -20   0   0   0   0
                  0   0   0   0   0
                 20   0   0   0   0
                 70 -10 -10   0   0 
                 </tableData>
              </table> 
            </product>
          </function>
          <output>fcs/steer-pos-deg[2]</output>
        </fcs_function>
        
        <fcs_function name="Rear Wheel Steering 3">
          <function name="fcs/steer-rear-deg[3]">
            <description>Steering command for right body gear</description>
            <product>
              <table>
                 <independentVar lookup="row">fcs/steer-pos-deg</independentVar>
                 <independentVar lookup="column">velocities/vg-fps</independentVar>
                 <tableData>
                      0  34  40  45
                -70  10  10   0   0 
                -20   0   0   0   0
                  0   0   0   0   0
                 20   0   0   0   0
                 65 -13 -13   0   0
                 70 -13 -13   0   0 
                 </tableData>
              </table> 
            </product>
          </function>
          <output>fcs/steer-pos-deg[3]</output>
        </fcs_function>

        <kinematic name="Speedbrake Control">
            <input>fcs/speedbrake-cmd-norm</input>
            <traverse>
                <setting>
                    <position>0.0000</position>
                    <time>0.0000</time>
                </setting>
                <setting>
                    <position>1.0000</position>
                    <time>1.5000</time>
                </setting>
            </traverse>
            <output>fcs/speedbrake-pos-norm</output>
        </kinematic>

        <kinematic name="Spoiler Control">
            <documentation>
               35 degrees spoiler movement
            </documentation>
            <input>fcs/spoiler-cmd-norm</input>
            <traverse>
                <setting>
                    <position>0.0000</position>
                    <time>0.0000</time>
                </setting>
                <setting>
                    <position>0.6110</position>
                    <time>5.0000</time>
                </setting>
            </traverse>
            <output>fcs/spoiler-pos-rad</output>
        </kinematic>
        <aerosurface_scale name="Spoiler Position Normalizer">
            <documentation>
               added.
            </documentation>
            <input>fcs/spoiler-pos-rad</input>
            <domain>
              <min>0</min>
              <max>0.6110</max>
            </domain>
            <range>
                <min>0</min>
                <max>1</max>
            </range>
            <output>fcs/spoiler-pos-norm</output>
        </aerosurface_scale>
        
        <switch name="Leading Edge Flaps">
            <default value="0"/>
            <test logic="AND" value="0.6670">
                fcs/flap-cmd-norm == 0.033
            </test>
            <test logic="AND" value="1.0000">
                fcs/flap-cmd-norm GT 0.166
            </test>
            <output>fcs/LE-flap-cmd-norm</output>
        </switch>

        <kinematic name="Leading Edge Flaps Control">
            <input>fcs/LE-flap-cmd-norm</input>
            <traverse>
                <setting>
                    <position>0.0</position>
                    <time>0.0000</time>
                </setting>
                <setting>
                    <position>0.6670</position>
                    <time>7.0000</time>
                </setting>
                <setting>
                    <position>1.0000</position>
                    <time>3.0000</time>
                </setting>
            </traverse>
            <output>fcs/LE-flap-pos-norm</output>
        </kinematic>

     </channel>
     
     <property>/autopilot/autobrake/left-brake-output</property>
     <property>/autopilot/autobrake/right-brake-output</property>
     <property>/controls/flight/speedbrakes</property>
     
     <channel name="Brakes">
         <fcs_function name="left brake">
             <function name="fcs/left-brake-cmd">
              <property>/autopilot/autobrake/left-brake-output</property>
             </function>
             <output>fcs/left-brake-cmd-norm</output>
        </fcs_function>
        
        <fcs_function name="right brake">
             <function name="fcs/right-brake-cmd">
              <property>/autopilot/autobrake/right-brake-output</property>
             </function>
             <output>fcs/right-brake-cmd-norm</output>
        </fcs_function>
    </channel>
     
    </flight_control>
    <aerodynamics>
        <documentation>
             created :
             - help takeoff.
             - smooth landing.
        </documentation>
        <function name="aero/function/Kge">
            <description>Ground_effect_height_factor</description>
            <product>
                  <table>
                      <independentVar>aero/h_b-mac-ft</independentVar>
                      <tableData>
                          0.0000    1.0000
                          0.1277    0.8000
                          0.2270    0.4000
                          0.2837    0.2000
                          0.3901    0.0000
                      </tableData>
                  </table>
            </product>
        </function>
        <function name="aero/function/Kgear">
            <description>Effectiveness_factor_landing_gear</description>
            <product>
                <avg>
                    <property>gear/unit[0]/pos-norm</property>
                    <property>gear/unit[1]/pos-norm</property>
                    <property>gear/unit[2]/pos-norm</property>
                    <property>gear/unit[3]/pos-norm</property>
                    <property>gear/unit[4]/pos-norm</property>
                </avg>
                <value>1.0000</value>
            </product>
        </function>
        <function name="aero/function/k_stab"> <!-- come up with a better name -->
            <description>Effectiveness_factor_stabilizer_and_elevator</description>
            <product>
                  <table>
                      <independentVar lookup="row">aero/alpha-rad</independentVar>
                      <independentVar lookup="column">fcs/flap-pos-deg</independentVar>
                      <tableData>
                                   0.0000  30.0000
                         -0.0870   1.0000   1.0000
                          0.2620   1.0000   1.0000
                          0.3490   0.9950   0.8250
                          0.4360   0.9250   0.7700
                      </tableData>
                  </table>
            </product>
        </function>
        <function name="aero/function/kCD"> <!-- come up with a better name -->
            <description>Effectiveness_factor_of_flaps_for_drag</description>
            <product>
                  <table>
                      <independentVar>fcs/flap-pos-deg</independentVar>
                      <tableData>
                          0.0000   0.0000
                          1.0000   1.0000
                         30.0000   1.0000
                      </tableData>
                  </table>
            </product>
        </function>

        <axis name="SIDE">
            <function name="aero/coefficient/CYb">
                <description>Side_force_due_to_beta</description>
                <product>
                    <property>aero/qbar-psf</property>
                    <property>metrics/Sw-sqft</property>
                    <property>aero/beta-rad</property>
                    <value>-1.0000</value>
                </product>
            </function>
        </axis>
        
        <!-- LIFT -->
        
        <function name="aero/coefficient/CLalpha">
            <description>Lift_due_to_alpha</description>
            <product>
                <property>fcs/failures-wings-lift</property>
                <table>
                    <independentVar lookup="row">aero/alpha-rad</independentVar>
                    <independentVar lookup="column">fcs/flap-pos-deg</independentVar>
                    <tableData>
                                 0.0000   1.0000   5.0000  10.0000  20.0000  25.0000  30.0000
                       -0.0870  -0.5500  -0.4400  -0.5500  -0.4000  -0.2600  -0.0400   0.2000
                        0.0000  -0.0800   0.0300  -0.0400   0.1300   0.3600   0.5900   0.8700
                        0.0870   0.3900   0.5000   0.5000   0.6400   0.9300   1.1100   1.4000
                        0.1750   0.8700   0.9600   1.0200   1.1600   1.4600   1.6200   1.9200
                        0.2620   1.1400   1.3200   1.5400   1.6700   1.9000   2.1000   2.3300
                        0.3490   1.2600   1.4800   1.8000   1.8800   2.0800   2.2500   2.4500
                        0.4360   1.3700   1.5700   1.8200   1.9200   2.0200   2.0900   2.1900
                    </tableData>
                </table>
            </product>
        </function>
        
        <documentation>
            Not sure if these are negative values?
        </documentation>
        <function name="aero/coefficient/dCLflap">
            <description>Delta_lift_due_to_flaps</description>
            <product>
                <property>aero/function/Kge</property>
                  <table>
                      <independentVar lookup="row">velocities/vc-kts</independentVar>
                      <independentVar lookup="column">fcs/flap-pos-deg</independentVar>
                      <tableData>
                                   0.0000   1.0000   5.0000  10.0000  20.0000  25.0000  30.0000
                          0.0000   0.0000   0.0000   0.0000   0.0000   0.0000   0.0000   0.0000
                        250.0000   0.0000   0.0240   0.0240   0.0580   0.1210   0.2040   0.2260
                      </tableData>
                  </table>
            </product>
        </function>

        <function name="aero/coefficient/dCLge">
            <description>Delta_Lift_due_to_groundeffect</description>
            <table>
                <independentVar lookup="row">aero/alpha-rad</independentVar>
                <independentVar lookup="column">fcs/flap-pos-deg</independentVar>
                <tableData>
                               0.0000   1.0000   5.0000  10.0000  20.0000  25.0000  30.0000
                      0.0000  -0.0750  -0.0600  -0.0450   0.0400   0.0800   0.2400   0.0000
                      0.2480   0.1750   0.1950   0.2000   0.3000   0.1850   0.0750  -0.0400
                </tableData>
            </table>
        </function>

        <documentation>
          no speedbrake : -0.08 -> 0.0.
        </documentation>
        <function name="aero/coefficient/dCLsb">
            <description>Delta_Lift_due_to_speedbrake</description>
            <product>
                <property>fcs/speedbrake-pos-norm</property>
                <value>0.0000</value>
            </product>
        </function>

        <function name="aero/coefficient/dCLsp">
            <description>Delta_Lift_due_to_spoilers</description>
            <product>
                <property>fcs/spoiler-pos-norm</property>
                <value>-1.0000</value>
            </product>
        </function>
        <function name="aero/coefficient/CLde_inboard">
            <description>Lift_due_to_inboard_elevator_deflection</description>
            <product>
                <abs><property>fcs/inboard-elevator-pos-rad</property></abs>
                <property>aero/function/k_stab</property>
                <value>0.1862</value>
            </product>
        </function>
        <function name="aero/coefficient/CLde_outboard">
            <description>Lift_due_to_outboard_elevator_deflection</description>
            <product>
                <abs><property>fcs/outboard-elevator-pos-rad</property></abs>
                <property>aero/function/k_stab</property>
                <value>0.2177</value>
            </product>
        </function>
        <function name="aero/coefficient/dCLgear">
            <description>Delta_lift_due_to_landing_gear</description>
            <product>
                <property>aero/function/Kgear</property>
                <table>
                    <independentVar lookup="row">aero/alpha-rad</independentVar>
                    <independentVar lookup="column">fcs/flap-pos-deg</independentVar>
                    <tableData>
                               0.0000   1.0000  25.0000  30.0000
                     -0.0870   0.0470   0.0470   0.0050   0.0050
                      0.4360   0.0020   0.0020   0.0280   0.0280
                    </tableData>
                </table>
            </product>
        </function>
        
        <documentation>
          CL = CL0 + ... + dCL_inboard_elevators + dCL_outboard_elevators + dCL_outboard_ailerons + dCL_landing_gear + dCL_ground_effect
        </documentation>
            
        <function name="aero/coefficient/CL">
            <description>Total_lift_coefficient</description>
            <sum>
                <property>aero/coefficient/CLalpha</property>
                <property>aero/coefficient/CLde_inboard</property>
                <property>aero/coefficient/CLde_outboard</property>
                <property>aero/coefficient/dCLflap</property>
                <property>aero/coefficient/dCLge</property>
                <property>aero/coefficient/dCLgear</property>
                <property>aero/coefficient/dCLsb</property>
                <property>aero/coefficient/dCLsp</property>
            </sum>
        </function>
            
        <axis name="LIFT">
            <documentation>
              CL = CL0 + ... + dCL_inboard_elevators + dCL_outboard_elevators + dCL_outboard_ailerons + dCL_landing_gear + dCL_ground_effect
            </documentation>
            
            <function name="my_lift">
                <description>Lift_force</description>
                <product>
                    <property>aero/qbar-psf</property>
                    <property>metrics/Sw-sqft</property>
                    <property>aero/coefficient/CL</property>
                    <property>fcs/failures-wings-lift</property>
                </product>
            </function>            
        </axis>
        
        <!-- DRAG -->
        
        <function name="aero/coefficient/CD0">
            <description>Drag_at_zero_lift</description>
            <product>
                <property>aero/function/kCD</property>
                <table>
                    <independentVar lookup="row">aero/alpha-rad</independentVar>
                    <independentVar lookup="column">fcs/flap-pos-deg</independentVar>
                    <tableData>
                                 1.0000   5.0000  20.0000  25.0000  30.0000
                       -0.0870   0.0875   0.1200   0.1020   0.0920   0.1375
                        0.0000   0.0375   0.0550   0.0600   0.0700   0.1125
                        0.0870   0.0310   0.0400   0.0720   0.0990   0.1610
                        0.1750   0.0602   0.0760   0.1300   0.1680   0.2500
                        0.2620   0.1300   0.1550   0.2150   0.2800   0.3600
                        0.4360   0.4500   0.4350   0.5100   0.6220   0.6875
                    </tableData>
                </table>
            </product>
        </function>
        
        <documentation>At MACH 0.3</documentation>
        
        <function name="aero/coefficient/CDmach">
            <description>Drag_due_to_mach</description>
            <product>
                <sum>
                    <value>1</value>
                    <product>
                        <property>aero/function/kCD</property>
                        <value>-1</value>
                    </product>
                </sum>
                <table>
                    <independentVar>aero/coefficient/CL</independentVar>
                    <tableData>
                        0.0000    0.0190
                        0.2000    0.0190
                        0.6000    0.0350
                        1.3000    0.1800
                    </tableData>
                </table>
            </product>
        </function>
        
        <function name="aero/coefficient/CDLEflap">
            <description>Drag_due_to_leading_edge_flaps</description>
            <product>
                <property>fcs/LE-flap-pos-norm</property>
                <property>fcs/failures-wings-lift</property>
                <value>0.0050</value>
            </product>
        </function>
        
        <function name="aero/coefficient/dCDgear">
            <description>Change_in_drag_due_to_gear</description>
            <product>
                <property>aero/function/Kgear</property>
                  <table>
                      <independentVar lookup="row">aero/alpha-rad</independentVar>
                      <independentVar lookup="column">fcs/flap-pos-deg</independentVar>
                      <tableData>
                                   0.0000   1.0000  30.0000
                         -0.0870   0.0275   0.0275   0.0155
                          0.0000   0.0280   0.0280   0.0115
                          0.0870   0.0280   0.0280   0.0085
                          0.1750   0.0270   0.0270   0.0070
                          0.2620   0.0245   0.0245   0.0076
                          0.3490   0.0225   0.0225   0.0122
                          0.4360   0.0200   0.0200   0.0062
                      </tableData>
                  </table>
            </product>
        </function>
        
        <documentation>
          no speedbrake : 0.0170 -> 0.0.
        </documentation>
        
        <function name="aero/coefficient/CDsb">
            <description>Drag_due_to_speedbrakes</description>
            <product>
                <property>fcs/speedbrake-pos-norm</property>
                <property>fcs/failures-wings-lift</property>
                <value>0.02</value>
            </product>
        </function>
        
        <function name="aero/coefficient/dCDsp">
            <description>Delta_drag_due_to_spoilers</description>
            <product>
                <sum>
                    <table>
                        <independentVar>fcs/flap-pos-deg</independentVar>
                        <tableData>
                           0.0000    0.0008
                           1.0000    0.0008
                           5.0000    0.0020
                          10.0000    0.0020
                          15.0000    0.0016
                          20.0000   -0.0008
                          25.0000   -0.0036
                          30.0000   -0.0054
                        </tableData>
                    </table>
                    <product>
                        <table>
                            <independentVar>fcs/flap-pos-deg</independentVar>
                            <tableData>
                               0.0000   -0.00013
                               1.0000   -0.00013
                               5.0000   -0.00012
                              10.0000   -0.00016
                              15.0000   -0.00032
                              20.0000   -0.00056
                              25.0000   -0.00060
                              30.0000   -0.00106
                            </tableData>
                        </table>
                        <sum>
                            <property>aero/alpha-deg</property>
                            <value>-4</value>
                        </sum>
                    </product>
                </sum>
                <value>12</value> <!-- 12 spoilers act as ground spoilers -->
            </product>
        </function>
        
        <function name="aero/coefficient/dCDspoilers">
            <description>Delta_drag_due_to_spoilers</description>
            <sum>
                <product>
                    <property>aero/coefficient/dCDsp</property>
                    <sum>
                        <value>1</value>
                        <product>
                            <value>0.15</value> <!-- FD, estimated, see page 100 -->
                            <property>aero/function/Kge</property>
                        </product>
                    </sum>
                </product>
                <product>
                    <value>0.05</value>
                    <value>0.15</value> <!-- FD, estimated, see page 100 -->
                    <property>aero/function/Kge</property>
                    <value>0.00185</value> <!-- 1/(45n), where n = 12 -->
                    <product>
                        <sum>
                            <property>fcs/spoiler-pos-rad[0]</property>
                            <property>fcs/spoiler-pos-rad[1]</property>
                            <property>fcs/spoiler-pos-rad[2]</property>
                            <property>fcs/spoiler-pos-rad[3]</property>
                            <property>fcs/spoiler-pos-rad[4]</property>
                            <property>fcs/spoiler-pos-rad[5]</property>
                            <property>fcs/spoiler-pos-rad[6]</property>
                            <property>fcs/spoiler-pos-rad[7]</property>
                            <property>fcs/spoiler-pos-rad[8]</property>
                            <property>fcs/spoiler-pos-rad[9]</property>
                            <property>fcs/spoiler-pos-rad[10]</property>
                            <property>fcs/spoiler-pos-rad[11]</property>
                        </sum>
                        <value>57.296</value> <!-- convert to deg -->
                    </product>
                </product>
            </sum>
        </function>
        
        <function name="aero/coefficient/dCDbeta">
            <description>Drag_due_to_sideslip</description>
            <table>
                <independentVar>aero/beta-rad</independentVar>
                <tableData>
                  -1.5700    1.2300
                  -0.2618    0.0225
                   0.0000    0.0000
                   0.2618    0.0225
                   1.5700    1.2300
                </tableData>
            </table>
        </function>
        
        <function name="aero/coefficient/dCDrudder">
            <description>Drag_due_to_rudder_deflection</description>
            <table>
                <independentVar lookup="row">fcs/rudder-pos-rad</independentVar>
                <independentVar lookup="column">aero/beta-rad</independentVar>
                <tableData>
                            -0.2618    0.0000    0.2618
                  -0.4363    0.0650    0.0800    0.0950
                   0.0000    0.0000    0.0000    0.0000
                   0.4363    0.0950    0.0800    0.0650
                </tableData>
            </table>
        </function>
        
        <!--<function name="aero/coefficient/CDde">
            <description>Drag_due_to_Elevator_Deflection</description>
            <product>
                <abs>
                    <avg>
                        <property>fcs/inboard-elevator-pos-norm</property>
                        <property>fcs/outboard-elevator-pos-norm</property>
                    </avg>
                </abs>
                <value>0.0550</value>
            </product>
        </function>-->
            
        <function name="aero/coefficient/CD">
            <description>Total_drag_coefficient</description>
            <sum>
                <property>aero/coefficient/CD0</property>
                <property>aero/coefficient/CDLEflap</property>
                <property>aero/coefficient/CDmach</property>
                <property>aero/coefficient/CDsb</property>
                <property>aero/coefficient/dCDbeta</property>
                <property>aero/coefficient/dCDgear</property>
                <property>aero/coefficient/dCDrudder</property>
                <property>aero/coefficient/dCDspoilers</property>
            </sum>
        </function>
            
        <axis name="DRAG">
            <documentation>
              CL = CL0 + ... + dCL_inboard_elevators + dCL_outboard_elevators + dCL_outboard_ailerons + dCL_landing_gear + dCL_ground_effect
            </documentation>
            
            <function name="my_drag">
                <description>Drag_force</description>
                <product>
                    <property>aero/qbar-psf</property>
                    <property>metrics/Sw-sqft</property>
                    <property>aero/coefficient/CD</property>
                </product>
            </function>            
        </axis>

        <axis name="ROLL">
            <function name="aero/coefficient/Clb">
                <description>Roll_moment_due_to_beta</description>
                <product>
                    <property>aero/qbar-psf</property>
                    <property>metrics/Sw-sqft</property>
                    <property>metrics/bw-ft</property>
                    <property>aero/beta-rad</property>
                    <value>-0.1000</value>
                </product>
            </function>
            <function name="aero/coefficient/Clp">
                <description>Roll_moment_due_to_roll_rate</description>
                <product>
                    <property>aero/qbar-psf</property>
                    <property>metrics/Sw-sqft</property>
                    <property>metrics/bw-ft</property>
                    <property>aero/bi2vel</property>
                    <property>velocities/p-aero-rad_sec</property>
                    <value>-0.4000</value>
                </product>
            </function>
            <function name="aero/coefficient/Clr">
                <description>Roll_moment_due_to_yaw_rate</description>
                <product>
                    <property>aero/qbar-psf</property>
                    <property>metrics/Sw-sqft</property>
                    <property>metrics/bw-ft</property>
                    <property>aero/bi2vel</property>
                    <property>velocities/r-aero-rad_sec</property>
                    <value>0.1500</value>
                </product>
            </function>
            <function name="aero/coefficient/Clda">
                <description>Roll_moment_due_to_aileron</description>
                <product>
                    <property>aero/qbar-psf</property>
                    <property>metrics/Sw-sqft</property>
                    <property>metrics/bw-ft</property>
                    <property>fcs/aileron-pos-rad</property>
                      <table>
                          <independentVar>velocities/mach</independentVar>
                          <tableData>
                              0.0000    0.1000    
                              2.0000    0.0330    
                          </tableData>
                      </table>
                </product>
            </function>
            <function name="aero/coefficient/Cldr">
                <description>Roll_moment_due_to_rudder</description>
                <product>
                    <property>aero/qbar-psf</property>
                    <property>metrics/Sw-sqft</property>
                    <property>metrics/bw-ft</property>
                    <property>fcs/rudder-pos-rad</property>
                    <value>0.0100</value>
                </product>
            </function>
        </axis>

        <axis name="PITCH">
            <function name="aero/coefficient/Cmalpha">
                <description>Pitch_moment_due_to_alpha</description>
                <product>
                    <property>aero/qbar-psf</property>
                    <property>metrics/Sw-sqft</property>
                    <property>metrics/cbarw-ft</property>
                    <table>
                        <independentVar lookup="row">aero/alpha-rad</independentVar>
                        <independentVar lookup="column">fcs/flap-pos-deg</independentVar>
                        <tableData>
                                   0.0000  30.0000
                         -0.0870   0.2700   0.1300
                          0.0000   0.0300  -0.0400
                          0.4360  -0.5700  -0.9500
                        </tableData>
                    </table>
                </product>
            </function>
            <function name="aero/coefficient/Cmde_inboard">
                <description>Pitch_moment_due_to_inboard_elevator</description>
                <product>
                    <property>aero/qbar-psf</property>
                    <property>metrics/Sw-sqft</property>
                    <property>metrics/cbarw-ft</property>
                    <property>fcs/inboard-elevator-pos-rad</property>
                    <table>
                        <independentVar>velocities/mach</independentVar>
                        <tableData>
                          0.0000    -0.7448
                          0.7000    -0.3953 
                        </tableData>
                    </table>
                </product>
            </function>
            <function name="aero/coefficient/Cmde_outboard">
                <description>Pitch_moment_due_to_outboard_elevator</description>
                <product>
                    <property>aero/qbar-psf</property>
                    <property>metrics/Sw-sqft</property>
                    <property>metrics/cbarw-ft</property>
                    <property>fcs/outboard-elevator-pos-rad</property>
                    <table>
                        <independentVar>velocities/mach</independentVar>
                        <tableData>
                          0.0000    -0.8594
                          0.7000    -0.2521
                        </tableData>
                    </table>
                </product>
            </function>
            <function name="aero/coefficient/Cmq">
                <description>Pitch_moment_due_to_pitch_rate</description>
                <product>
                    <property>aero/qbar-psf</property>
                    <property>metrics/Sw-sqft</property>
                    <property>metrics/cbarw-ft</property>
                    <property>aero/ci2vel</property>
                    <property>velocities/q-aero-rad_sec</property>
                    <value>-22.6000</value>
                </product>
            </function>
            <function name="aero/coefficient/Cmadot">
                <description>Pitch_moment_due_to_alpha_rate</description>
                <product>
                    <property>aero/qbar-psf</property>
                    <property>metrics/Sw-sqft</property>
                    <property>metrics/cbarw-ft</property>
                    <property>aero/ci2vel</property>
                    <property>aero/alphadot-rad_sec</property>
                    <value>-3.4000</value>
                </product>
            </function>
        </axis>

        <axis name="YAW">
            <function name="aero/coefficient/Cnb">
                <description>Yaw_moment_due_to_beta</description>
                <product>
                    <property>aero/qbar-psf</property>
                    <property>metrics/Sw-sqft</property>
                    <property>metrics/bw-ft</property>
                    <property>aero/beta-rad</property>
                    <value>0.1200</value>
                </product>
            </function>
            <function name="aero/coefficient/Cnr">
                <description>Yaw_moment_due_to_yaw_rate</description>
                <product>
                    <property>aero/qbar-psf</property>
                    <property>metrics/Sw-sqft</property>
                    <property>metrics/bw-ft</property>
                    <property>aero/bi2vel</property>
                    <property>velocities/r-aero-rad_sec</property>
                    <value>-0.1500</value>
                </product>
            </function>
            <function name="aero/coefficient/Cndr">
                <description>Yaw_moment_due_to_rudder</description>
                <product>
                    <property>aero/qbar-psf</property>
                    <property>metrics/Sw-sqft</property>
                    <property>metrics/bw-ft</property>
                    <property>fcs/rudder-pos-rad</property>
                    <value>-0.1000</value>
                </product>
            </function>
            <function name="aero/coefficient/Cnda">
                <description>Adverse_yaw</description>
                <product>
                    <property>aero/qbar-psf</property>
                    <property>metrics/Sw-sqft</property>
                    <property>metrics/bw-ft</property>
                    <property>fcs/aileron-pos-rad</property>
                    <value>0.0000</value>
                </product>
            </function>
        </axis>
    </aerodynamics>


     <external_reactions>

        <force name="pushback" frame="BODY">
        <location unit="IN">
                <x> -1050 </x>
                <y> 0 </y>
                <z> -100 </z>
        </location>
        <direction>
            <x>1</x>
            <y>0</y>
            <z>0</z>
        </direction>
        </force>

 </external_reactions>
</fdm_config>
